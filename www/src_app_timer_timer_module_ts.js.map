{"version":3,"file":"src_app_timer_timer_module_ts.js","mappings":"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","sources":["./src/app/timer/timer-routing.module.ts","./src/app/timer/timer.module.ts","./src/app/timer/timer.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TimerPage } from './timer.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TimerPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class TimerPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TimerPageRoutingModule } from './timer-routing.module';\n\nimport { TimerPage } from './timer.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TimerPageRoutingModule\n  ],\n  declarations: [TimerPage]\n})\nexport class TimerPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { HiitDataService, TimeDisplay } from '../services/hiit-data.service';\nimport { ViewWillEnter, ViewWillLeave } from '@ionic/angular';\n\n@Component({\n  selector: 'app-timer',\n  templateUrl: './timer.page.html',\n  styleUrls: ['./timer.page.scss'],\n})\nexport class TimerPage implements ViewWillEnter, ViewWillLeave {\n  firstCountDown: TimeDisplay = { minutes: 0, seconds: 5 };\n  currentExercise: string;\n  currentRound: number = 1;\n  timeToShow: TimeDisplay = { ...this.firstCountDown };\n  timer: NodeJS.Timeout;\n  status: 'waiting' | 'working' | 'rest' | 'finished';\n  killAll: boolean = false;\n\n  constructor(private hiit: HiitDataService) {}\n\n  async ionViewWillEnter() {\n    this.killAll = false;\n    this.currentRound = 1;\n    this.firstCountDown = { minutes: 0, seconds: 5 };\n    this.timeToShow = { ...this.firstCountDown };\n    this.status = 'waiting';\n    this.currentExercise = 'Starting in: ';\n    await this.intervalSetter();\n    await this.startWorkout();\n  }\n\n  ionViewWillLeave() {\n    this.killAll = true;\n  }\n\n  async startWorkout() {\n    for (\n      let i = 0;\n      i < this.hiit.hiitForm.get('nbrRounds').value && !this.killAll;\n      i++\n    ) {\n      this.currentRound = i + 1;\n      if (i > 0) {\n        this.status = 'waiting';\n        this.currentExercise = 'New Round ! Get prepared !';\n        this.timeToShow = { ...this.firstCountDown };\n        await this.intervalSetter();\n      }\n      for (\n        let j = 0;\n        j < this.hiit.hiitForm.get('exercisesName').value.length &&\n        !this.killAll;\n        j++\n      ) {\n        this.status = 'working';\n        this.currentExercise = this.hiit.hiitForm.get('exercisesName').value[j];\n        this.timeToShow = { ...this.hiit.hiitForm.get('workTime').value };\n        await this.intervalSetter();\n        if (j + 1 < this.hiit.hiitForm.get('exercisesName').value.length) {\n          this.status = 'rest';\n          this.currentExercise = 'REST';\n          this.timeToShow = { ...this.hiit.hiitForm.get('restTime').value };\n          await this.intervalSetter();\n        }\n      }\n    }\n    this.currentExercise = 'Well done ! you finished your exercise';\n    this.status = 'finished';\n  }\n\n  intervalSetter(): Promise<void> {\n    return new Promise<void>((resolve, reject) => {\n      this.timer = setInterval(() => {\n        this.timeToShow = this.countdown(this.timeToShow);\n        if (this.countdownIsDone(this.timeToShow) || this.killAll) {\n          clearInterval(this.timer);\n          resolve();\n        }\n      }, 1000);\n    });\n  }\n\n  countdownIsDone(current: TimeDisplay): boolean {\n    return current.minutes === 0 && current.seconds === 0;\n  }\n\n  countdown(current: TimeDisplay): TimeDisplay {\n    if (current.seconds > 0) {\n      current.seconds--;\n    } else {\n      if (current.minutes > 0) {\n        current.seconds = 60;\n        current.minutes--;\n      }\n    }\n    return current;\n  }\n}\n"],"names":["Component","HiitDataService","TimerPage","constructor","hiit","minutes","seconds","firstCountDown","ionViewWillEnter","killAll","currentRound","timeToShow","status","currentExercise","intervalSetter","startWorkout","ionViewWillLeave","i","hiitForm","get","value","j","length","Promise","resolve","reject","timer","setInterval","countdown","countdownIsDone","clearInterval","current","selector","template"],"sourceRoot":"webpack:///"}